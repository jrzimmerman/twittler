<!DOCTYPE html>
<html>

<head>
  <script src="jquery.js"></script>
  <script src="data_generator.js"></script>
</head>

<body>
  <h1>Twittler</h1>
  <input class="draft" type="text" />
  <button class="send" enabled>Send</button>

  <ul class="messages">

  </ul>


  <script>
    $(document).ready(function() {

      var formatDate = function(date) {
        var day = String(date.getDate());
        var monthArray = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sept', 'Oct', 'Nov', 'Dec'];
        var month = monthArray[date.getMonth()];
        var shortDate = month + " " + day;
        var hours = date.getHours();
        var dayOrNight = 'AM';
        if (hours === 0) {
          hours = 12;
        } else if (hours > 12) {
          hours -= 12;
          dayOrNight = 'PM';
        } else if (hours === 12) {
          dayOrNight = 'PM';
        }
        hours = String(hours);
        var minutes = date.getMinutes();
        if (minutes < 10) {
          minutes = '0' + String(minutes);
        }
        minutes = String(minutes);
        var formattedTime = hours + ':' + minutes + ' ' + dayOrNight;
        return formattedTime + " " + shortDate;
      }
      var display = function(tweet) {
        $('.messages').prepend('<li>' + tweet + '</li>');
      }
      var sendText = function() {
        var d = new Date();
        input = $(".draft").val();
        display('@zimmy130: ' + input + ' - ' + formatDate(d));
      }
      var tweet = function() {
        $(".messages").empty();
        var index = 0;
        while (index < streams.home.length) {
          var tweet = streams.home[index];
          display('@' + tweet.user + ': ' + tweet.message + ' - ' + formatDate(tweet.created_at));
          index++;
        }
      };
      tweet();
      setInterval(tweet, 5000);

      $('.send').on('click', function() {
        sendText();
      });

    });
  </script>
</body>

</html>
